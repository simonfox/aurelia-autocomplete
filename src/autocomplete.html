<template>
  <require from="./autocomplete.css"></require>

  <div class.bind="autocomplete-container">
    <input id="${'au-autocomplete-' + id}"
           value.bind="inputValue & debounce:delay"
           disabled.bind="disabled"
           placeholder.bind="placeholder"
           keydown.delegate="keydown($event.which)"
           blur.trigger="blur()"
           type="text"
           autocomplete="off"
           aria-autocomplete="list" />
    <ul if.bind="expanded"
        id.one-time="'au-autocomplate-' + id + '-suggestions'"
        class="suggestions"
        role="listbox"
        ref="suggestionsUL">
      <li repeat.for="suggestion of suggestions"
          id.one-time="'au-autocomplate-' + id + '-suggestion-' + $index"
          class.bind="($index === index ? 'selected ' : '') + 'suggestion'"
          mousedown.delegate="suggestionClicked(suggestion)"
          role="option">
        <template replaceable
                  part="suggestion">
          <compose view.bind="suggestionView"
                   view-model.bind="suggestion"></compose>
        </template>
      </li>
    </ul>
  </div>
</template>